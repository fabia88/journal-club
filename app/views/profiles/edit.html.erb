<div class="container-fluid">
  <div class="row">
    <div class="col-xs-12">

      <h2>Edit User Profile</h2>

      <div class="form-group">
        <%= simple_form_for(@user, url: profile_path) do |f| %>
        <%= f.input :first_name, class: "form-control" %>
        <%= f.input :last_name, class: "form-control" %>
        <%= f.input :email, class: "form-control" %>
        <%= f.input :job_description, class: "form-control" %>
        <%= f.input :education, class: "form-control" %>
        <%= f.input :research_interests, class: "form-control"%>



        <p><strong>Search Keywords</strong></p>
          <% if @user.search_keywords %>
            <div id="search-keywords">
              <% @user.search_keywords.each do |search_keyword| %>
                <div class="js-search-keyword-wrapper"><input type="text" name="user[search_keywords][]" value="<%= search_keyword %>"><button class="js-remove-search-keyword-div">Remove</button></div>
              <% end %>
            </div>
          <% end %>

          <button id="add-keyword">Add keyword field</button>

          <%= f.input :current_password, hint: "We need your current password to confirm your changes", required: true %>
          <%= f.submit %>
          <% end %>
        </div>

        <div>
          <ul class="list-unstyled list-inline">
            <li><%= link_to "Back to profile", user_path(@user.id) %></li>
            <li><%= link_to "Back to user index", users_path %></li>
            <li><%= link_to "Back to home", root_path %></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <%= content_for(:after_js) do %>
  <script>
    $(document).ready(function(){
      $("#add-keyword").click(function(){
        div_html = '<div class="js-search-keyword-wrapper"><input type="text" name="user[search_keywords][]"><button>Remove</button></div>'
        $("#search-keywords").append(div_html);
        $("#search-keywords").on('click', '.js-search-keyword-wrapper button' ,function(){
          $div = $(this).parent();
          $div.remove();
        });
      });

      $(".js-remove-search-keyword-div").click(function(){
        $div = $(this).parent();
        $div.remove();
      });
    });
</script>
<% end %>