<div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-4 col-sm-offset-4">

      <h2>Edit User Profile</h2>

      <div class="form-group">
        <%= simple_form_for(@user, url: profile_path) do |f| %>
        <%= f.input :first_name, class: "form-control" %>
        <%= f.input :last_name, class: "form-control" %>
        <%= f.input :email, class: "form-control" %>
        <%= f.input :job_description, class: "form-control" %>
        <%= f.input :education, class: "form-control" %>
        <%= f.input :research_interests, class: "form-control"%>



        <% if @user.search_keywords %>
        <div id="search-keywords">
          <% @user.search_keywords.each do |search_keyword| %>
          <input type="text" name="user[search_keywords][]" value="<%= search_keyword %>">
          <% end %>
        </div>
        <button id="add-keyword">Add keyword</button>
        <% end %>

        <%= f.input :current_password, hint: "We need your current password to confirm your changes", required: true %>
        <%= f.submit %>
        <% end %>
      </div>

      <div>
        <ul class="list-unstyled list-inline">
          <li><%= link_to "Back to profile", user_path(@user.id) %></li>
          <li><%= link_to "Back to user index", users_path %></li>
          <li><%= link_to "Back to home", root_path %></li>
        </ul>
      </div>
    </div>
  </div>
</div>

<%= content_for(:after_js) do %>
<script>
  $(document).ready(function(){
    $("#add-keyword").click(function(){
      input_html = '<input type="text" name="user[search_keywords][]">'
      $("#search-keywords").append(input_html);
    });
  });
</script>
<% end %>
